<idea-plugin>
    <id>com.arolang.aro</id>
    <name>ARO Language</name>
    <version>1.2.0</version>
    <vendor email="team@arolang.org" url="https://arolang.github.io/aro/">ARO Team</vendor>

    <description><![CDATA[
        <p>Language support for <b>ARO</b> (Action Result Object) - a declarative programming language for expressing business features.</p>

        <h3>Features</h3>
        <ul>
            <li><b>Syntax Highlighting</b> - Full highlighting for ARO code</li>
            <li><b>Language Server</b> - Real-time diagnostics, hover info, go to definition</li>
            <li><b>Code Completion</b> - Smart completions and live templates</li>
            <li><b>Find References</b> - Find all usages of symbols</li>
            <li><b>Document Outline</b> - Navigate feature sets and statements</li>
            <li><b>Bracket Matching</b> - Match braces, parentheses, and angle brackets</li>
            <li><b>Comment Support</b> - Block comments with (* *)</li>
        </ul>

        <p><b>Note:</b> Requires the <code>aro</code> CLI to be installed and available in PATH.</p>

        <h3>ARO Syntax</h3>
        <pre>
(Application-Start: My Service) {
    &lt;Log&gt; "Starting..." to the &lt;console&gt;.
    &lt;Return&gt; an &lt;OK: status&gt; for the &lt;startup&gt;.
}
        </pre>

        <p>See <a href="https://arolang.github.io/aro/">ARO Documentation</a> for more information.</p>
    ]]></description>

    <change-notes><![CDATA[
        <h3>1.2.0</h3>
        <ul>
            <li>Updated syntax highlighting with action categories (REQUEST, OWN, RESPONSE, EXPORT, LIFECYCLE, TEST)</li>
            <li>Improved LSP server path resolution for common installations</li>
            <li>Fixed version validation for beta versions</li>
            <li>Added missing actions: Parameters, Render, Connect, Disconnect, Broadcast</li>
            <li>Unified variable highlighting</li>
        </ul>

        <h3>1.1.0</h3>
        <ul>
            <li>Added Language Server Protocol (LSP) support</li>
            <li>Real-time diagnostics (errors and warnings)</li>
            <li>Go to definition</li>
            <li>Find references</li>
            <li>Hover information (types, documentation)</li>
            <li>Code completion</li>
            <li>Document outline (symbols)</li>
        </ul>

        <h3>1.0.0</h3>
        <ul>
            <li>Initial release</li>
            <li>Syntax highlighting via TextMate grammar</li>
            <li>Live templates for common patterns</li>
            <li>Bracket matching and comment toggling</li>
        </ul>
    ]]></change-notes>

    <idea-version since-build="243" until-build="243.*"/>

    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.plugins.textmate</depends>
    <depends>com.redhat.devtools.lsp4ij</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- TextMate bundle for syntax highlighting (handles file type association via bundle) -->
        <textmate.bundleProvider implementation="com.arolang.aro.AROTextMateBundleProvider"/>

        <!-- Live templates -->
        <defaultLiveTemplates file="/liveTemplates/ARO.xml"/>
        <liveTemplateContext implementation="com.arolang.aro.AROTemplateContextType"/>

        <!-- Settings -->
        <applicationService
            serviceImplementation="com.arolang.aro.settings.AROSettingsState"/>
        <applicationConfigurable
            parentId="tools"
            instance="com.arolang.aro.settings.AROSettingsConfigurable"
            id="com.arolang.aro.settings.AROSettingsConfigurable"
            displayName="ARO Language"/>

        <!-- Spell checker dictionary for ARO-specific terms -->
        <spellchecker.bundledDictionaryProvider
            implementation="com.arolang.aro.AROSpellCheckerDictionary"/>
    </extensions>

    <!-- LSP4IJ Language Server Registration -->
    <extensions defaultExtensionNs="com.redhat.devtools.lsp4ij">
        <server id="aro"
                name="ARO Language Server"
                factoryClass="com.arolang.aro.AROLspServerDescriptor">
            <description><![CDATA[
                Provides language intelligence for ARO files including diagnostics,
                hover information, go to definition, and code completion.
            ]]></description>
        </server>
        <fileNamePatternMapping patterns="*.aro" serverId="aro"/>
    </extensions>
</idea-plugin>
